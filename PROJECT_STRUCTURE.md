# NearUsé‚»é‡ŒAPP - é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
NearUs/
â”œâ”€â”€ app.py                          # Flaskåç«¯ä¸»æ–‡ä»¶
â”œâ”€â”€ requirements.txt                 # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ README.md                       # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ LEARNING_GUIDE.md              # å­¦ä¹ æŒ‡å—
â”œâ”€â”€ PROJECT_STRUCTURE.md           # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ start_app.bat                   # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_frontend.ps1              # å‰ç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_backend.ps1               # åç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ create_demo.bat                 # åˆ›å»ºæ¼”ç¤ºæ•°æ®è„šæœ¬
â”œâ”€â”€ fix_venv.bat                    # ä¿®å¤è™šæ‹Ÿç¯å¢ƒè„šæœ¬
â”œâ”€â”€ venv/                           # Pythonè™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ instance/                       # æ•°æ®åº“æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ nearus.db                   # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ frontend/                       # Reactå‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ package.json               # Node.jsä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ webpack.config.js          # Webpacké…ç½®
â”‚   â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”‚   â””â”€â”€ src/                       # Reactæºä»£ç 
â”‚       â”œâ”€â”€ index.js               # ä¸»å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ index.css              # å…¨å±€æ ·å¼
â”‚       â”œâ”€â”€ contexts/              # React Context
â”‚       â”‚   â”œâ”€â”€ AuthContext.js     # è®¤è¯ä¸Šä¸‹æ–‡
â”‚       â”‚   â””â”€â”€ ToastContext.js    # é€šçŸ¥ä¸Šä¸‹æ–‡
â”‚       â””â”€â”€ components/            # Reactç»„ä»¶
â”‚           â”œâ”€â”€ BusinessMap.js     # å•†å®¶åœ°å›¾ç»„ä»¶
â”‚           â”œâ”€â”€ Coupons.js         # ä¼˜æƒ åˆ¸ç»„ä»¶
â”‚           â”œâ”€â”€ ImageWall.js       # å›¾ç‰‡å¢™ç»„ä»¶
â”‚           â”œâ”€â”€ Leaderboard.js     # æ’è¡Œæ¦œç»„ä»¶
â”‚           â”œâ”€â”€ Notifications.js   # é€šçŸ¥ç»„ä»¶
â”‚           â”œâ”€â”€ Polls.js           # æŠ•ç¥¨ç»„ä»¶
â”‚           â”œâ”€â”€ Quest.js           # ä»»åŠ¡æŒ‘æˆ˜ç»„ä»¶
â”‚           â””â”€â”€ RealTimeNotifications.js # å®æ—¶é€šçŸ¥ç»„ä»¶
â””â”€â”€ uploads/                        # æ–‡ä»¶ä¸Šä¼ ç›®å½•
```

## ğŸ—ï¸ æ¶æ„è¯´æ˜

### åç«¯æ¶æ„ (Flask)

**æ ¸å¿ƒæ–‡ä»¶ï¼š**
- `app.py`: ä¸»åº”ç”¨æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰è·¯ç”±å’Œä¸šåŠ¡é€»è¾‘

**ä¸»è¦æ¨¡å—ï¼š**
1. **æ•°æ®åº“æ¨¡å‹** (ç¬¬144-1178è¡Œ)
   - User: ç”¨æˆ·æ¨¡å‹
   - Post: å¸–å­æ¨¡å‹
   - Group: ç¾¤ç»„æ¨¡å‹
   - Activity: æ´»åŠ¨æ¨¡å‹
   - Task: ä»»åŠ¡æ¨¡å‹
   - Notification: é€šçŸ¥æ¨¡å‹
   - Business: å•†å®¶æ¨¡å‹
   - Coupon: ä¼˜æƒ åˆ¸æ¨¡å‹
   - Poll: æŠ•ç¥¨æ¨¡å‹
   - Image: å›¾ç‰‡æ¨¡å‹
   - Quest: ä»»åŠ¡æŒ‘æˆ˜æ¨¡å‹

2. **APIè·¯ç”±** (ç¬¬1210-3300è¡Œ)
   - è®¤è¯ç›¸å…³: `/auth/login`, `/auth/register`
   - ç”¨æˆ·ç›¸å…³: `/users/me`, `/users/search`
   - å†…å®¹ç›¸å…³: `/posts`, `/groups`, `/activities`
   - åŠŸèƒ½ç›¸å…³: `/businesses`, `/coupons`, `/polls`, `/quests`
   - å®æ—¶é€šä¿¡: WebSocketäº‹ä»¶å¤„ç†

3. **ä¸­é—´ä»¶å’Œå·¥å…·å‡½æ•°**
   - JWTè®¤è¯è£…é¥°å™¨
   - æ•æ„Ÿè¯è¿‡æ»¤
   - é”™è¯¯å¤„ç†

### å‰ç«¯æ¶æ„ (React)

**æ ¸å¿ƒæ–‡ä»¶ï¼š**
- `frontend/src/index.js`: ä¸»å…¥å£æ–‡ä»¶ï¼ŒåŒ…å«è·¯ç”±å’Œä¸»è¦ç»„ä»¶

**ä¸»è¦æ¨¡å—ï¼š**
1. **Contextç®¡ç†**
   - AuthContext: ç”¨æˆ·è®¤è¯çŠ¶æ€ç®¡ç†
   - ToastContext: é€šçŸ¥æ¶ˆæ¯ç®¡ç†

2. **é¡µé¢ç»„ä»¶**
   - Home: é¦–é¡µ
   - Login/Register: ç™»å½•æ³¨å†Œ
   - Posts: åŠ¨æ€å‘å¸ƒ
   - Groups: ç¾¤ç»„ç®¡ç†
   - Activities: æ´»åŠ¨ç®¡ç†
   - Tasks: ä»»åŠ¡ç®¡ç†
   - Chat: èŠå¤©åŠŸèƒ½
   - Friends: å¥½å‹ç®¡ç†
   - Leaderboard: æ’è¡Œæ¦œ
   - Notifications: é€šçŸ¥ä¸­å¿ƒ

3. **åŠŸèƒ½ç»„ä»¶**
   - BusinessMap: å•†å®¶åœ°å›¾
   - Coupons: ä¼˜æƒ åˆ¸
   - ImageWall: å›¾ç‰‡å¢™
   - Polls: æŠ•ç¥¨
   - Quest: ä»»åŠ¡æŒ‘æˆ˜
   - RealTimeNotifications: å®æ—¶é€šçŸ¥

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯æ ˆ
- **Python 3.12**: ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Flask**: Webæ¡†æ¶
- **SQLAlchemy**: ORMæ•°æ®åº“æ“ä½œ
- **SQLite**: æ•°æ®åº“
- **Flask-JWT-Extended**: JWTè®¤è¯
- **Flask-Bcrypt**: å¯†ç åŠ å¯†
- **Flask-SocketIO**: WebSocketæ”¯æŒ
- **Flask-CORS**: è·¨åŸŸæ”¯æŒ
- **valx**: æ•æ„Ÿè¯è¿‡æ»¤

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18**: å‰ç«¯æ¡†æ¶
- **React Router**: è·¯ç”±ç®¡ç†
- **Axios**: HTTPå®¢æˆ·ç«¯
- **Framer Motion**: åŠ¨ç”»åº“
- **Webpack**: æ¨¡å—æ‰“åŒ…å™¨
- **Babel**: JavaScriptç¼–è¯‘å™¨

## ğŸš€ å¯åŠ¨æµç¨‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬ (éœ€è¦3.12+)
python --version

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. å¯åŠ¨æœåŠ¡
```bash
# æ–¹å¼1: ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
start_app.bat

# æ–¹å¼2: åˆ†åˆ«å¯åŠ¨
# å¯åŠ¨åç«¯
start_backend.ps1

# å¯åŠ¨å‰ç«¯
start_frontend.ps1
```

### 3. è®¿é—®åº”ç”¨
- å‰ç«¯: http://localhost:3000
- åç«¯API: http://localhost:5000

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

**ç”¨æˆ·ç³»ç»Ÿï¼š**
- `users`: ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- `friendships`: å¥½å‹å…³ç³»
- `notifications`: é€šçŸ¥æ¶ˆæ¯

**å†…å®¹ç³»ç»Ÿï¼š**
- `posts`: åŠ¨æ€å¸–å­
- `groups`: ç¾¤ç»„ä¿¡æ¯
- `group_members`: ç¾¤ç»„æˆå‘˜
- `activities`: æ´»åŠ¨ä¿¡æ¯
- `tasks`: ä»»åŠ¡ä¿¡æ¯

**åŠŸèƒ½ç³»ç»Ÿï¼š**
- `businesses`: å•†å®¶ä¿¡æ¯
- `coupons`: ä¼˜æƒ åˆ¸
- `user_coupons`: ç”¨æˆ·ä¼˜æƒ åˆ¸
- `polls`: æŠ•ç¥¨
- `poll_votes`: æŠ•ç¥¨è®°å½•
- `images`: å›¾ç‰‡
- `image_likes`: å›¾ç‰‡ç‚¹èµ
- `image_comments`: å›¾ç‰‡è¯„è®º
- `quests`: ä»»åŠ¡æŒ‘æˆ˜
- `user_quests`: ç”¨æˆ·ä»»åŠ¡è¿›åº¦

**æ¸¸æˆåŒ–ç³»ç»Ÿï¼š**
- `achievements`: æˆå°±
- `user_achievements`: ç”¨æˆ·æˆå°±
- `games`: æ¸¸æˆ
- `game_scores`: æ¸¸æˆåˆ†æ•°
- `lotteries`: æŠ½å¥–
- `lottery_entries`: æŠ½å¥–è®°å½•

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. ç”¨æˆ·è®¤è¯
- JWT Tokenè®¤è¯
- å¯†ç BCryptåŠ å¯†
- è·¯ç”±æƒé™æ§åˆ¶

### 2. å†…å®¹å®‰å…¨
- æ•æ„Ÿè¯è¿‡æ»¤ (valx)
- è¾“å…¥éªŒè¯
- XSSé˜²æŠ¤

### 3. æ•°æ®å®‰å…¨
- SQLæ³¨å…¥é˜²æŠ¤ (SQLAlchemy)
- CSRFé˜²æŠ¤
- æ–‡ä»¶ä¸Šä¼ é™åˆ¶

## ğŸ“± åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç³»ç»Ÿ
- æ³¨å†Œ/ç™»å½•
- ä¸ªäººèµ„æ–™ç®¡ç†
- å¥½å‹ç³»ç»Ÿ
- ç§¯åˆ†ç³»ç»Ÿ

### 2. ç¤¾äº¤åŠŸèƒ½
- åŠ¨æ€å‘å¸ƒ
- ç¾¤ç»„ç®¡ç†
- èŠå¤©ç³»ç»Ÿ
- é€šçŸ¥ç³»ç»Ÿ

### 3. å•†ä¸šåŠŸèƒ½
- å•†å®¶åœ°å›¾
- ä¼˜æƒ åˆ¸ç³»ç»Ÿ
- æ´»åŠ¨ç®¡ç†

### 4. æ¸¸æˆåŒ–åŠŸèƒ½
- ä»»åŠ¡æŒ‘æˆ˜
- æŠ•ç¥¨ç³»ç»Ÿ
- æ’è¡Œæ¦œ
- æˆå°±ç³»ç»Ÿ

### 5. å†…å®¹ç®¡ç†
- å›¾ç‰‡å¢™
- å®æ—¶é€šçŸ¥
- å†…å®¹å®¡æ ¸

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **åç«¯å¼€å‘**
   ```python
   # 1. å®šä¹‰æ•°æ®æ¨¡å‹
   class NewFeature(db.Model):
       id = db.Column(db.Integer, primary_key=True)
       # å…¶ä»–å­—æ®µ...
   
   # 2. åˆ›å»ºAPIè·¯ç”±
   @app.route('/api/new-feature', methods=['GET', 'POST'])
   @jwt_required()
   def new_feature():
       # ä¸šåŠ¡é€»è¾‘...
   ```

2. **å‰ç«¯å¼€å‘**
   ```jsx
   // 1. åˆ›å»ºç»„ä»¶
   function NewFeature() {
       const [data, setData] = useState([]);
       
       // ç»„ä»¶é€»è¾‘...
       
       return <div>æ–°åŠŸèƒ½ç»„ä»¶</div>;
   }
   
   // 2. æ·»åŠ è·¯ç”±
   <Route path="/new-feature" element={<NewFeature />} />
   ```

### è°ƒè¯•æŠ€å·§

1. **åç«¯è°ƒè¯•**
   - ä½¿ç”¨Flaskè°ƒè¯•æ¨¡å¼
   - æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
   - ä½¿ç”¨æ•°æ®åº“å·¥å…·æŸ¥çœ‹æ•°æ®

2. **å‰ç«¯è°ƒè¯•**
   - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - React Developer Tools
   - ç½‘ç»œè¯·æ±‚ç›‘æ§

### æ€§èƒ½ä¼˜åŒ–

1. **åç«¯ä¼˜åŒ–**
   - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
   - ç¼“å­˜æœºåˆ¶
   - åˆ†é¡µå¤„ç†

2. **å‰ç«¯ä¼˜åŒ–**
   - ç»„ä»¶æ‡’åŠ è½½
   - å›¾ç‰‡ä¼˜åŒ–
   - ä»£ç åˆ†å‰²

## ğŸ“š å­¦ä¹ è·¯å¾„

1. **åŸºç¡€é˜¶æ®µ**
   - ç†è§£é¡¹ç›®ç»“æ„
   - è¿è¡Œé¡¹ç›®
   - ä¿®æ”¹ç®€å•å†…å®¹

2. **è¿›é˜¶é˜¶æ®µ**
   - æ·»åŠ æ–°åŠŸèƒ½
   - ä¿®æ”¹ç°æœ‰åŠŸèƒ½
   - ä¼˜åŒ–æ€§èƒ½

3. **é«˜çº§é˜¶æ®µ**
   - é‡æ„ä»£ç 
   - æ·»åŠ æµ‹è¯•
   - éƒ¨ç½²ä¸Šçº¿

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å­¦ä¹ æŒ‡å—](./LEARNING_GUIDE.md): è¯¦ç»†çš„å­¦ä¹ æ•™ç¨‹
- [README](./README.md): é¡¹ç›®åŸºæœ¬è¯´æ˜
- [requirements.txt](./requirements.txt): ä¾èµ–åŒ…åˆ—è¡¨
- [package.json](./frontend/package.json): å‰ç«¯ä¾èµ–é…ç½®

---

é€šè¿‡è¿™ä¸ªé¡¹ç›®ç»“æ„è¯´æ˜ï¼Œä½ å¯ä»¥å¿«é€Ÿäº†è§£æ•´ä¸ªé¡¹ç›®çš„æ¶æ„å’Œå„ä¸ªæ¨¡å—çš„ä½œç”¨ã€‚å»ºè®®æŒ‰ç…§å­¦ä¹ æŒ‡å—é€æ­¥æ·±å…¥ï¼Œä»ç®€å•çš„ä¿®æ”¹å¼€å§‹ï¼Œé€æ­¥æŒæ¡å…¨æ ˆå¼€å‘æŠ€èƒ½ã€‚
